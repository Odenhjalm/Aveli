# Backend-only environment template (FastAPI + Supabase + Stripe + LiveKit).
# Copy to backend/.env for local dev; never commit real values.

APP_ENV=production
PORT=8080
API_BASE_URL=http://127.0.0.1:8080
FRONTEND_BASE_URL=https://your-frontend.app

# Supabase / database
SUPABASE_PROJECT_REF=your-project-ref
SUPABASE_URL=https://${SUPABASE_PROJECT_REF}.supabase.co
SUPABASE_ANON_KEY=replace-with-anon-key
SUPABASE_SERVICE_ROLE_KEY=replace-with-service-role-key
SUPABASE_DB_PASSWORD=replace-with-db-password
SUPABASE_DB_URL=postgresql://postgres.${SUPABASE_PROJECT_REF}:${SUPABASE_DB_PASSWORD}@aws-1-eu-north-1.pooler.supabase.com:5432/postgres?sslmode=require
DATABASE_URL=${SUPABASE_DB_URL}
SUPABASE_JWT_SECRET=replace-with-supabase-jwt-secret
SUPABASE_PAT=replace-with-pat-for-mcp-cli

# Auth + media
JWT_SECRET=generate-64-hex-secret
JWT_ALGORITHM=HS256
JWT_EXPIRES_MINUTES=900
JWT_REFRESH_EXPIRES_MINUTES=1440
MEDIA_SIGNING_SECRET=generate-64-hex-secret
MEDIA_SIGNING_TTL_SECONDS=600
MEDIA_ROOT=/app/media
MEDIA_PUBLIC_CACHE_SECONDS=3600
LESSON_MEDIA_MAX_BYTES=2147483648
MEDIA_ALLOW_LEGACY_MEDIA=false

# Stripe
STRIPE_SECRET_KEY=sk_live_replace_or_sk_test_replace
STRIPE_PUBLISHABLE_KEY=pk_live_replace_or_pk_test_replace
STRIPE_WEBHOOK_SECRET=whsec_replace
STRIPE_BILLING_WEBHOOK_SECRET=whsec_replace
STRIPE_CHECKOUT_BASE=https://your-frontend.app
STRIPE_CHECKOUT_UI_MODE=hosted
STRIPE_MERCHANT_DISPLAY_NAME=Aveli
STRIPE_CONNECT_CLIENT_ID=ca_replace
STRIPE_CONNECT_RETURN_URL=https://your-frontend.app/stripe/connect/return
STRIPE_CONNECT_REFRESH_URL=https://your-frontend.app/stripe/connect/refresh
STRIPE_PRICE_MONTHLY=price_replace
STRIPE_PRICE_YEARLY=price_replace
# Optional per-service pricing: STRIPE_PRICE_SERVICE_{SLUG}=price_xxx
CHECKOUT_SUCCESS_URL=https://your-frontend.app/checkout/success
CHECKOUT_CANCEL_URL=https://your-frontend.app/checkout/cancel

# LiveKit
LIVEKIT_WS_URL=wss://your-livekit-instance.livekit.cloud
LIVEKIT_API_URL=https://your-livekit-instance.livekit.cloud
LIVEKIT_API_KEY=LK_API_KEY
LIVEKIT_API_SECRET=LK_API_SECRET
LIVEKIT_WEBHOOK_SECRET=lk_webhook_secret

# CORS
CORS_ALLOW_ORIGINS=https://your-frontend.app,http://localhost:3000,http://127.0.0.1:3000
CORS_ALLOW_ORIGIN_REGEX=http://(localhost|127\\.0\\.0\\.1)(:\\d+)?

# QA/CI
CI=false
IMPORT_EMAIL=teacher@example.com
IMPORT_PASSWORD=teacher123
QA_API_BASE_URL=http://127.0.0.1:8080
QA_BASE_URL=http://127.0.0.1:8080
QA_DATABASE_URL=postgresql://postgres.${SUPABASE_PROJECT_REF}:${SUPABASE_DB_PASSWORD}@aws-1-eu-north-1.pooler.supabase.com:5432/postgres?sslmode=require
QA_HOST_EMAIL=host@example.com
QA_HOST_PASSWORD=host123
QA_PARTICIPANT_EMAIL=participant@example.com
QA_PARTICIPANT_PASSWORD=participant123
